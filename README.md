# 工作流设计器

一个可视化的工作流编排系统，帮助您设计和规划业务流程。

## 主要功能

### 创建工作流
1. 点击"新建工作流"进入空白画布
2. 从左侧拖拽组件到画布
3. 输入节点名称（名称不能与其他节点重复）
4. 连接节点创建流程

### 组件类型
- **子流程** - 执行子流程处理
- **接口调用** - 调用外部 API
- **接口循环调用** - 循环调用 API 处理集合数据

### 连接节点
- 从一个节点的连接点拖拽到另一个节点创建连线
- 连线上的标签显示优先级和条件 `[P优先级,条件]`
- 双击连线可删除
- 连线条件实时更新显示
- 右键点击连线可进行操作

### 右键菜单
- **右键点击节点**：弹出菜单，可选择"删除"选项
- **右键点击连线**：弹出菜单，可选择"添加条件网关"或"删除"选项
- 删除节点和连线时显示二次确认弹框

**删除节点的关联处理：**
- 删除节点时，同时删除关联节点之间的所有连线和条件网关
- 使用 BFS 算法找到所有可达节点，删除这些节点之间的所有连线
- 确认弹框会显示将删除的连线和条件网关数量

**样式风格：**
- 右键菜单和确认弹框采用浅灰半透明毛玻璃风格
- 弹框居中显示，操作按钮采用蓝/灰色配色

### 条件网关
右键点击连线 → 选择"添加条件网关"，可在连线中点创建条件分支节点。

**注意：** 添加条件网关功能已从属性编辑器移除，仅可通过右键菜单操作。

**嵌套层级限制：**
- 两个相邻节点之间最多包含 **3 条边**（即最多添加 2 个条件网关）
- 当已达到 3 条边时，不能再添加条件网关
- 右键菜单会显示当前深度提示（如"深度2/3"）

**条件继承规则：**
- **入边**（源节点 → 网关）：继承原连线的所有条件（优先级、statusCode值、参数条件）
- **出边**（网关 → 目标节点）：使用默认条件 `[P10]`，可在属性面板重新配置

**使用步骤：**
1. 右键点击一条连线
2. 点击"添加条件网关"选项
3. 系统自动在原位置插入条件网关节点
4. 原连线被拆分为入边和出边，入边继承原条件，出边使用默认条件

### 连线属性配置
选中连线后，右侧面板可配置：
- **优先级** - 数字越小优先级越高（0-10），同一连接点的优先级不可重复
- **statusCode 条件** - 状态值匹配
- **参数条件** - 参数名、关系（equals/notEqual/contains/matches）、参数值，显示格式为 `param=xxx, value=yyy, operator=z`

**优先级规则：**
- 新建连线时，自动分配剩余优先级中最大的值（优先级最低）
- 同一连接点最多 11 条出边（优先级 0-10 用完后禁止创建新连线）

### 导入和导出
- **导入** - 从 XML 文件恢复已保存的工作流
- **导出** - 将工作流保存为 XML 文件

## 开始使用

```bash
npm install
npm run dev
```

访问 http://localhost:5173
