# 工作流设计器

一个可视化的工作流编排系统，帮助您设计和规划业务流程。

## 主要功能

### 创建工作流
1. 点击"新建工作流"进入空白画布
2. 从左侧拖拽组件到画布
3. 输入节点名称
4. 连接节点创建流程

### 组件类型
- **子流程** - 执行子流程处理
- **接口调用** - 调用外部 API
- **接口循环调用** - 循环调用 API 处理集合数据

### 连接节点
- 从一个节点的连接点拖拽到另一个节点创建连线
- 连线上的标签显示优先级和条件 `[P优先级,条件]`
- 双击连线可删除
- 连线条件实时更新显示

### 条件网关
右键点击连线 → 选择"添加条件网关"，可在连线中点创建条件分支节点。

**嵌套层级限制：**
- 从工作流起始节点到最深叶子节点，路径上最多包含 **3 条连线**
- 当某条路径已达 3 条连线时，该路径上的所有连线都不能再添加条件网关
- 属性面板和右键菜单会显示当前路径深度（如"当前路径深度: 2/3"）

**条件继承规则：**
- **入边**（源节点 → 网关）：继承原连线的所有条件（优先级、statusCode值、参数条件）
- **出边**（网关 → 目标节点）：使用默认条件 `[P10]`，可在属性面板重新配置

**使用步骤：**
1. 选中一条连线（点击连线或右键菜单）
2. 点击"添加条件网关"按钮
3. 系统自动在原位置插入条件网关节点
4. 原连线被拆分为入边和出边，入边继承原条件，出边使用默认条件

### 连线属性配置
选中连线后，右侧面板可配置：
- **优先级** - 数字越小优先级越高（0-10）
- **statusCode 条件** - 状态值匹配
- **参数条件** - 参数名、关系（equals/notEqual/contains/matches）、参数值，显示格式为 `param=xxx, value=yyy, operator=z`

### 导入和导出
- **导入** - 从 XML 文件恢复已保存的工作流
- **导出** - 将工作流保存为 XML 文件

## 开始使用

```bash
npm install
npm run dev
```

访问 http://localhost:5173
